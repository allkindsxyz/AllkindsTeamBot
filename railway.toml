# Railway Configuration
# Generated by fix_webhook_mode.py at 2025-04-30T13:10:56.796806

[build]
builder = "nixpacks"
buildCommand = "pip install -r requirements.txt"

[deploy]
startCommand = "python -m src.main"
healthcheckPath = "/health"
healthcheckTimeout = 10
restartPolicyType = "on-failure"
restartPolicyMaxRetries = 5

[environments]
  # Production environment
  [environments.production]
    # Force webhook mode
    USE_WEBHOOK = "true"
    # Optimize worker settings
    numReplicas = 1
    
    # Health check settings
    healthcheckPath = "/health"
    healthcheckTimeout = 10
    
    # Optimize for Railway
    PORT = "8080"
    
    # Bot settings
    # You need to provide valid tokens in Railway dashboard
    # BOT_TOKEN = "YOUR_MAIN_BOT_TOKEN"
    # COMMUNICATOR_BOT_TOKEN = "YOUR_COMMUNICATOR_BOT_TOKEN"
    # Communicator bot username (without @)
    COMMUNICATOR_BOT_USERNAME = "AllkindsChatBot"
    
    # Webhook paths
    BOT_WEBHOOK_PATH = "/webhook"
    COMMUNICATOR_WEBHOOK_PATH = "/comm_webhook"
    
    # Optional settings for debugging 
    LOG_LEVEL = "INFO"
